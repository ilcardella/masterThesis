\chapter{Logical project documentation}
\label{appA}

This is the code that can be copied in a .json .

\begin{lstlisting}[mathescape,caption={The .json to deplot the \mm on Flexiant},label={lst:mpflexi}]
{
  "eClass": "net.cloudml.core:CloudMLModel",
  "name": "SensApp",
  "providers": [
    {
      "eClass": "net.cloudml.core:Provider",
      "name": "flexiant",
      "credentials": "./credentialsFlexiantPolimi.ext",
      "properties": [
        {
          "eClass": "net.cloudml.core:Property",
          "name": "endPoint",
          "value": "https://api.sd1.flexiant.net:4442/userapi"
        }
      ]
    }
  ],
  "internalComponents": [
    {
      "eClass": "net.cloudml.core:InternalComponent",
      "name": "MonitoringManager",
      "resources": [
        {
          "eClass": "net.cloudml.core:Resource",
          "name": "monitoring",
          "downloadCommand": "git clone https://github.com/deib-polimi/modaclouds-monitoring-manager.git;cd modaclouds-monitoring-manager;git checkout tags/v1.1.2;mvn package;cd ..",
          "startCommand": "export MODACLOUDS_KNOWLEDGEBASE_ENDPOINT_IP=127.0.0.1;export MODACLOUDS_KNOWLEDGEBASE_ENDPOINT_PORT=3030;export MODACLOUDS_KNOWLEDGEBASE_DATASET_PATH=/modaclouds/kb;export MODACLOUDS_MONITORING_DDA_ENDPOINT_IP=127.0.0.1;export MODACLOUDS_MONITORING_DDA_ENDPOINT_PORT=8175;export MODACLOUDS_MONITORING_MANAGER_PORT=8170;export MODACLOUDS_MATLAB_SDA_IP=127.0.0.1;export MODACLOUDS_MATLAB_SDA_PORT=8176;export MODACLOUDS_WEKA_SDA_IP=127.0.0.1;export MODACLOUDS_WEKA_SDA_PORT=8177;nohup java -jar modaclouds-monitoring-manager/target/monitoring-manager-1.1.2.jar > nohup-monitoring.out"
        }
      ],
      "providedPorts": [],
      "requiredPorts": [
        {
          "eClass": "net.cloudml.core:ProvidedPort",
          "name": "knowledgebaseRequired",
          "isLocal": true,
          "isMandatory": true,
          "portNumber": "0",
          "component": "internalComponents[MonitoringManager]"
        },
        {
          "eClass": "net.cloudml.core:ProvidedPort",
          "name": "dataanalyzerRequired",
          "isLocal": true,
          "isMandatory": true,
          "portNumber": "0",
          "component": "internalComponents[MonitoringManager]"
        }
      ],
      "requiredExecutionPlatform": {
        "eClass": "net.cloudml.core:RequiredExecutionPlatform",
        "name": "vmRequired",
        "owner": "internalComponents[MonitoringManager]"
      }
    },
    {
      "eClass": "net.cloudml.core:InternalComponent",
      "name": "KnowledgeBase",
      "resources": [
        {
          "eClass": "net.cloudml.core:Resource",
          "name": "knowledge",
          "downloadCommand": "sudo apt-get install unzip; sudo apt-get install -y ruby; wget -P ~ http://apache.panu.it//jena/binaries/jena-fuseki-1.1.0-distribution.zip; unzip jena-fuseki-1.1.0-distribution.zip",
          "configureCommand": "cd ~/jena-fuseki-1.1.0; sudo chmod +x fuseki-server s-*",
          "startCommand": "nohup ./fuseki-server --update --port 3030 --loc Data /modaclouds/kb > nohup-fuseki.out"
        }
      ],
      "providedPorts": [
        {
          "eClass": "net.cloudml.core:ProvidedPort",
          "name": "knowledgebaseProvided",
          "isLocal": true,
          "portNumber": "0",
          "component": "internalComponents[KnowledgeBase]"
        }
      ],
      "requiredPorts": [],
      "requiredExecutionPlatform": {
        "eClass": "net.cloudml.core:RequiredExecutionPlatform",
        "name": "vmRequired",
        "owner": "internalComponents[KnowledgeBase]"
      }
    },
    {
      "eClass": "net.cloudml.core:InternalComponent",
      "name": "DataAnalyzer",
      "resources": [
        {
          "eClass": "net.cloudml.core:Resource",
          "name": "analyzer",
          "downloadCommand": "sudo apt-get update;sudo apt-get install -y openjdk-7-jdk; sudo apt-get install -y git;sudo apt-get install -y maven;sudo apt-get install unzip;git clone https://github.com/deib-polimi/rsp-services-csparql.git;cd rsp-services-csparql;git checkout tags/0.4.6.1-modaclouds;mvn package;cd ..",
          "startCommand": "nohup java -jar rsp-services-csparql/target/rsp-services-csparql-0.4.6.1-modaclouds.jar 8175 > ~/nohup-rsp.out" 
        }
      ],
      "providedPorts": [
        {
          "eClass": "net.cloudml.core:ProvidedPort",
          "name": "dataanalyzerProvided",
          "isLocal": true,
          "portNumber": "0",
          "component": "internalComponents[DataAnalyzer]"
        }
      ],
      "requiredPorts": [
        {
          "eClass": "net.cloudml.core:ProvidedPort",
          "name": "knowledgebaseRequired",
          "isLocal": true,
          "isMandatory": false,
          "portNumber": "0",
          "component": "internalComponents[DataAnalyzer]"
        }
      ],
      "requiredExecutionPlatform": {
        "eClass": "net.cloudml.core:RequiredExecutionPlatform",
        "name": "vmRequired",
        "owner": "internalComponents[DataAnalyzer]"
      }
    }
  ],
  "internalComponentInstances": [
    {
      "eClass": "net.cloudml.core:InternalComponentInstance",
      "name": "monitoringmanager",
      "type": "internalComponents[MonitoringManager]",
      "providedPortInstances": [],
      "requiredPortInstances": [
        {
          "eClass": "net.cloudml.core:ProvidedPortInstance",
          "name": "knowledgebaseRequiredPort",
          "type": "internalComponents[MonitoringManager]/requiredPorts[knowledgebaseRequired]"
        },{
          "eClass": "net.cloudml.core:ProvidedPortInstance",
          "name": "dataanalyzerRequiredPort",
          "type": "internalComponents[MonitoringManager]/requiredPorts[dataanalyzerRequired]"
        }
	
      ],
      "requiredExecutionPlatformInstance": {
        "eClass": "net.cloudml.core:RequiredExecutionPlatformInstance",
        "name": "vmRequired1",
        "owner": "internalComponentInstances[monitoringmanager]",
        "type": "internalComponents[MonitoringManager]/requiredExecutionPlatform[vmRequired]"
      }
    },
    {
      "eClass": "net.cloudml.core:InternalComponentInstance",
      "name": "dataanalyzer",
      "type": "internalComponents[DataAnalyzer]",
      "requiredPortInstances": [
        {
          "eClass": "net.cloudml.core:ProvidedPortInstance",
          "name": "knowledgebaseRequiredPort",
          "type": "internalComponents[DataAnalyzer]/requiredPorts[knowledgebaseRequired]"
        }
      ],
      "providedPortInstances": [
        {
          "eClass": "net.cloudml.core:ProvidedPortInstance",
          "name": "dataanalyzerProvidedPort",
          "type": "internalComponents[DataAnalyzer]/providedPorts[dataanalyzerProvided]"
        }
      ],
      "requiredExecutionPlatformInstance": {
        "eClass": "net.cloudml.core:RequiredExecutionPlatformInstance",
        "name": "vmRequired3",
        "owner": "internalComponentInstances[dataanalyzer]",
        "type": "internalComponents[DataAnalyzer]/requiredExecutionPlatform[vmRequired]"
      }
    },
    {
      "eClass": "net.cloudml.core:InternalComponentInstance",
      "name": "knowledgebase",
      "type": "internalComponents[KnowledgeBase]",
      "providedPortInstances": [
        {
          "eClass": "net.cloudml.core:ProvidedPortInstance",
          "name": "knowledgebaseProvidedPort",
          "type": "internalComponents[KnowledgeBase]/providedPorts[knowledgebaseProvided]"
        }
      ],
      "requiredPortInstances": [],
      "requiredExecutionPlatformInstance": {
        "eClass": "net.cloudml.core:RequiredExecutionPlatformInstance",
        "name": "vmRequired4",
        "owner": "internalComponentInstances[knowledgebase]",
        "type": "internalComponents[KnowledgeBase]/requiredExecutionPlatform[vmRequired]"
      }
    }
  ],
  "vms": [
    {
      "eClass": "net.cloudml.core:VM",
      "name": "ML",
      "minRam": "2048",
      "maxRam": "0",
      "minCores": "1",
      "maxCores": "0",
      "minStorage": "10",
      "maxStorage": "0",
      "os": "ubuntu",
      "is64os": true,
      "securityGroup": "default",
      "sshKey": "timisoara_key",
      "groupName": "Polimi",
      "privateKey": "cloudml.pem",
      "provider": "providers[flexiant]",
      "imageId": "ubuntu 12.04 - Cloud Image",
      "properties": [
        {
          "eClass": "net.cloudml.core:Property",
          "name": "KeyPath",
          "value": "./cloudml.pem"
        }
      ],
      "providedExecutionPlatforms": [
        {
          "eClass": "net.cloudml.core:ProvidedExecutionPlatform",
          "name": "vmProvided",
          "owner": "vms[ML]"
        }
      ]
    }
  ],
  "vmInstances": [
    {
      "eClass": "net.cloudml.core:VMInstance",
      "name": "modaclouds_monitoring_platform_cloudml_test",
      "type": "vms[ML]",
      "providedExecutionPlatformInstances": [
        {
          "eClass": "net.cloudml.core:ProvidedExecutionPlatformInstance",
          "name": "vmProvided",
          "owner": "vmInstances[modaclouds_monitoring_platform_cloudml_test]",
          "type": "vms[ML]/providedExecutionPlatforms[vmProvided]"
        }
      ]
    }
  ],
  "relationships": [
    {
      "eClass": "net.cloudml.core:Relationship",
      "name": "KB-DDA",
      "requiredPort": "internalComponents[DataAnalyzer]/requiredPorts[knowledgebaseRequired]",
      "providedPort": "internalComponents[KnowledgeBase]/providedPorts[knowledgebaseProvided]",
      "requiredPortResource": {
        "eClass": "net.cloudml.core:Resource",
        "name": "no name1",
        "downloadCommand": "",
        "configureCommand": ""
      },
      "providedPortResource": {
        "eClass": "net.cloudml.core:Resource",
        "name": "no name2",
        "downloadCommand": "",
        "configureCommand": ""
      }
    },
    {
      "eClass": "net.cloudml.core:Relationship",
      "name": "KB-MM",
      "requiredPort": "internalComponents[MonitoringManager]/requiredPorts[knowledgebaseRequired]",
      "providedPort": "internalComponents[KnowledgeBase]/providedPorts[knowledgebaseProvided]",
      "requiredPortResource": {
        "eClass": "net.cloudml.core:Resource",
        "name": "no name3",
        "downloadCommand": "",
        "configureCommand": ""
      },
      "providedPortResource": {
        "eClass": "net.cloudml.core:Resource",
        "name": "no name4",
        "downloadCommand": "",
        "configureCommand": ""
      }
    },
    {
      "eClass": "net.cloudml.core:Relationship",
      "name": "DDA-MM",
      "requiredPort": "internalComponents[MonitoringManager]/requiredPorts[dataanalyzerRequired]",
      "providedPort": "internalComponents[DataAnalyzer]/providedPorts[dataanalyzerProvided]",
      "requiredPortResource": {
        "eClass": "net.cloudml.core:Resource",
        "name": "no name5",
        "downloadCommand": "",
        "configureCommand": ""
      },
      "providedPortResource": {
        "eClass": "net.cloudml.core:Resource",
        "name": "no name6",
        "downloadCommand": "",
        "configureCommand": ""
      }
    }
  ],
  "relationshipInstances": [
    {
      "eClass": "net.cloudml.core:RelationshipInstance",
      "name": "kb-dda",
      "type": "relationships[KB-DDA]",
      "requiredPortInstance": "internalComponentInstances[dataanalyzer]/requiredPortInstances[knowledgebaseRequiredPort]",
      "providedPortInstance": "internalComponentInstances[knowledgebase]/providedPortInstances[knowledgebaseProvidedPort]"
    },
    {
      "eClass": "net.cloudml.core:RelationshipInstance",
      "name": "kb-mm",
      "type": "relationships[KB-MM]",
      "requiredPortInstance": "internalComponentInstances[monitoringmanager]/requiredPortInstances[knowledgebaseRequiredPort]",
      "providedPortInstance": "internalComponentInstances[knowledgebase]/providedPortInstances[knowledgebaseProvidedPort]"
    },
    {
      "eClass": "net.cloudml.core:RelationshipInstance",
      "name": "dda-mm",
      "type": "relationships[DDA-MM]",
      "requiredPortInstance": "internalComponentInstances[monitoringmanager]/requiredPortInstances[dataanalyzerRequiredPort]",
      "providedPortInstance": "internalComponentInstances[dataanalyzer]/providedPortInstances[dataanalyzerProvidedPort]"
    }
  ],
  "executesInstances": [
    {
      "eClass": "net.cloudml.core:ExecuteInstance",
      "name": "runOn1",
      "providedExecutionPlatformInstance": "vmInstances[modaclouds_monitoring_platform_cloudml_test]/providedExecutionPlatformInstances[vmProvided]",
      "requiredExecutionPlatformInstance": "internalComponentInstances[monitoringmanager]/requiredExecutionPlatformInstance[vmRequired1]"
    },
    {
      "eClass": "net.cloudml.core:ExecuteInstance",
      "name": "runOn3",
      "providedExecutionPlatformInstance": "vmInstances[modaclouds_monitoring_platform_cloudml_test]/providedExecutionPlatformInstances[vmProvided]",
      "requiredExecutionPlatformInstance": "internalComponentInstances[knowledgebase]/requiredExecutionPlatformInstance[vmRequired4]"
    },
    {
      "eClass": "net.cloudml.core:ExecuteInstance",
      "name": "runOn4",
      "providedExecutionPlatformInstance": "vmInstances[modaclouds_monitoring_platform_cloudml_test]/providedExecutionPlatformInstances[vmProvided]",
      "requiredExecutionPlatformInstance": "internalComponentInstances[dataanalyzer]/requiredExecutionPlatformInstance[vmRequired3]"
    }
  ]
}

\end{lstlisting}